<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "1ad5de6a6388d02c145a92dd04358bab",
  "translation_date": "2025-05-20T08:30:56+00:00",
  "source_file": "10-ai-agents-production/README.md",
  "language_code": "ja"
}
-->
[![AI Agents In Production](../../../translated_images/lesson-10-thumbnail.0b68f4240618b3d5b26693b78cf2cf0a8b36131b50bb08daf91d548cecc87424.ja.png)](https://youtu.be/l4TP6IyJxmQ?si=IvCW3cbw0NJ2mUMV)

> _(上の画像をクリックすると、このレッスンのビデオがご覧いただけます)_
# 本番環境でのAIエージェント

## はじめに

このレッスンでは以下について扱います：

- AIエージェントを本番環境に効果的にデプロイするための計画方法。
- 本番環境にAIエージェントをデプロイする際に直面しやすい一般的な問題と課題。
- パフォーマンスを維持しつつコストを管理する方法。

## 学習目標

このレッスンを終えると、以下のことができるようになります／理解できるようになります：

- 本番環境のAIエージェントシステムのパフォーマンス、コスト、効果を向上させる技術。
- AIエージェントの評価方法と評価すべきポイント。
- AIエージェントを本番環境にデプロイする際のコスト管理方法。

信頼できるAIエージェントをデプロイすることは非常に重要です。「Building Trustworthy AI Agents」のレッスンもぜひご覧ください。

## AIエージェントの評価

AIエージェントをデプロイする前、最中、そして後に、適切な評価システムを持つことが重要です。これにより、システムがあなたやユーザーの目標に沿っていることを確認できます。

AIエージェントを評価するには、エージェントの出力だけでなく、エージェントが動作しているシステム全体を評価できることが重要です。これには以下が含まれますが、これらに限定されません：

- 初期のモデルリクエスト。
- ユーザーの意図を特定するエージェントの能力。
- タスクを実行するために適切なツールを選定するエージェントの能力。
- ツールからのエージェントへの応答。
- ツールの応答を解釈するエージェントの能力。
- エージェントの応答に対するユーザーのフィードバック。

これにより、改善すべき部分をよりモジュール化して特定でき、モデル、プロンプト、ツール、その他のコンポーネントの変更の効果を効率的にモニタリングできます。

## AIエージェントのよくある問題と対処法

| **問題**                                       | **考えられる解決策**                                                                                                                                                                                                   |
| ---------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| AIエージェントがタスクを安定して実行できない   | - AIエージェントに与えるプロンプトを明確にし、目的をはっきりさせる。<br>- タスクを細分化して複数のエージェントで処理する方法が効果的か検討する。                                                            |
| AIエージェントが無限ループに陥る               | - エージェントがプロセスを停止すべき条件を明確に設定する。<br>- 複雑な推論や計画を要するタスクには、推論に特化した大きなモデルを使用する。                                                                 |
| AIエージェントのツール呼び出しがうまく機能しない | - ツールの出力をエージェントシステムの外でテスト・検証する。<br>- ツールのパラメータ、プロンプト、名前付けを見直す。                                                                                           |
| マルチエージェントシステムが安定しない         | - 各エージェントに与えるプロンプトをより具体的かつ明確にし、重複を避ける。<br>- 「ルーティング」やコントローラー役のエージェントを使って、適切なエージェントを選定する階層的システムを構築する。            |

## コスト管理

AIエージェントを本番環境にデプロイする際のコスト管理に役立つ戦略をいくつか紹介します：

- **レスポンスのキャッシュ** - よくあるリクエストやタスクを特定し、エージェントシステムを通す前にレスポンスを返すことで、類似リクエストの処理量を減らせます。より基本的なAIモデルを使ってリクエストの類似度を判定するフローを実装することも可能です。

- **小型モデルの活用** - Small Language Models (SLMs) は特定のエージェントユースケースで十分な性能を発揮し、コストを大幅に削減できます。前述の通り、評価システムを構築して大きなモデルと性能を比較することが、SLMの適合度を理解する最良の方法です。

- **ルーターモデルの利用** - 複数のモデルやサイズを組み合わせる戦略です。LLMやSLM、サーバーレス関数を使い、リクエストの複雑さに応じて最適なモデルへルーティングすることができます。これによりコスト削減と適切なタスクのパフォーマンス維持が両立します。

## おめでとうございます

これで「AI Agents for Beginners」の最後のレッスンとなります。

今後もフィードバックや業界の変化に応じてレッスンを追加していく予定ですので、また近いうちにぜひお立ち寄りください。

AIエージェントの学習と開発を続けたい方は、<a href="https://discord.gg/kzRShWzttr" target="_blank">Azure AI Community Discord</a>にご参加ください。

ワークショップ、コミュニティラウンドテーブル、「なんでも質問」セッションを開催しています。

また、本番環境でAIエージェントを構築するための追加教材をまとめたLearnコレクションもご用意しています。

## 前のレッスン

[Metacognition Design Pattern](../09-metacognition/README.md)

**免責事項**:  
本書類はAI翻訳サービス[Co-op Translator](https://github.com/Azure/co-op-translator)を使用して翻訳されています。正確性を期していますが、自動翻訳には誤りや不正確な箇所が含まれる可能性があることをご承知ください。原文の言語で記載されたオリジナルの文書が正式な情報源とみなされます。重要な情報については、専門の人間による翻訳を推奨します。本翻訳の利用により生じたいかなる誤解や誤訳についても、当方は一切の責任を負いかねます。